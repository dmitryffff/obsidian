---
tags:
  - –∫–Ω–∏–≥–∏
  - –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
  - backend
–∞–≤—Ç–æ—Ä: –¢–∫–∞—á–µ–≤ –û–ª–µ–≥ –ê–ª–µ–∫—Å–µ–µ–≤–∏—á
–≥–æ–¥: 2024
–Ω–∞—á–∞–ª —á–∏—Ç–∞—Ç—å: 2024-06-05
–∑–∞–∫–æ–Ω—á–∏–ª —á–∏—Ç–∞—Ç—å: 
–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü: 477
–æ—Ü–µ–Ω–∫–∞(0/10): 
–ø—Ä–æ—á–∏—Ç–∞–ª n-—Ä–∞–∑: 
—Ü–µ–Ω–∞: 762
---

### –£—Ç–æ—á–Ω–µ–Ω–∏—è
[üìñ](https://www.postgresql.org/docs/) ‚Äì —Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é. –ö–∞–∫—É—é ‚Äì –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. 

**RLS(Row-Level Security)** ‚Äì –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–æ—Å—Ç—É–ø –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–∞–±–ª–∏—Ü, –Ω–æ –∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫. ^rls

**–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ(`view`)** ‚Äì –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è. **–¢.–µ. —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É.** ^view
* –ú–æ–∂–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏ –∫–∞–∫ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
* –ß–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã(–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫)
* –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã –Ω–µ –≤—ã–∑–æ–≤–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã. –ú–æ–∂–µ–º –æ–±–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é: `REFRESH MATERIALIZED VIEW user_names;`

**–î–µ–∫–∞—Ä—Ç–æ–≤–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü(`cross join`)** ‚Äì –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü. ^cartesian-product
### –†–µ–∑—é–º–µ
==–î–æ–±–∞–≤—å—Ç–µ –∫—Ä–∞—Ç–∫–∏–µ –∏—Ç–æ–≥–∏ –∏ —Å–≤–æ–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –æ –∫–Ω–∏–≥–µ. –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤—ã —É–∑–Ω–∞–ª–∏ –∏ –∫–∞–∫–∏–µ –µ–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏?==
## 1. –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ DBEAVER
1. –í—Å–µ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–æ–¥–∏–º –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏.
2. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `postgres` —Å —Ä–æ–ª—å—é `SUPERUSER`, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≤—Å–µ.
3. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–∏:
```sql
create role {–∏–º—è —Ä–æ–ª–∏} {—Å–ø–∏—Å–æ–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤};
```
4. –ê—Ç—Ä–∏–±—É—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ–ª–∏:
	* `SUPERUSER` ‚Äì –±—É–¥–µ—Ç –ª–∏ —Ä–æ–ª—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é `NOSUPERUSER
	* `CREATEBD` ‚Äì –º–æ–∂–µ—Ç –ª–∏ —Ä–æ–ª—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã. `NOCREATEBD`
	* `CREATEROLE` ‚Äì –º–æ–∂–µ—Ç –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ä–æ–ª–∏. `NOCREATEROLE`
	* `INHERIT` ‚Äì –±—É–¥–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å" –ø—Ä–∞–≤–∞ —Ä–æ–ª–µ–π, —á–ª–µ–Ω–æ–º –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è. `INHERIT`
	* `LOGIN` ‚Äì –º–æ–∂–µ—Ç –ª–∏ —Ä–æ–ª—å –±—ã—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –±–¥. `NOLOGIN`
	* `BYPASSRLS` ‚Äì –±—É–¥–µ—Ç –ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–∞—â–∏—Ç–∞ [[#^rls|RLS]]. –ú–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `SUPERUSER`. `BYPASSRLS`
	* `CONNECTION LIMIT`‚Äì –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è —Ä–æ–ª–∏. `-1` ‚Äì –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
	* `PASSWORD 'pass'` ‚Äì –∑–∞–¥–∞–µ—Ç –ø–∞—Ä–æ–ª—å
```sql
create role user1 superuser createdb createrole inherit login bypassrls connection limit 2 password 'user1';
```
5. –î–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è **–ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏**.
	* `select` ‚Äì –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–∞–±–ª–∏—Ü, [[#^view|–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π]]
	* `insert` ‚Äì –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü—É. –ú–æ–∂–µ—Ç –±—ã—Ç—å –¥–∞–Ω –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤
	* `delete` ‚Äì —É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
	* `truncate` ‚Äì –æ—á–∏—Å—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
	* `references` ‚Äì —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞
	* `trigger` ‚Äì —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
	* `create` ‚Äì —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã, —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ —Ç–∞–±–ª–∏—Ü(–∫–æ–ª–æ–Ω–∫–∏ –∏ —Ç.–ø.)
	* `connect` ‚Äì –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –±–¥
	* `temporary` ‚Äì —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
	* `execute` ‚Äì –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—É
	* `usage` ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
	* `all[priveliges]` ‚Äì –¥–æ–±–∞–≤–ª—è–µ—Ç –≤—Å–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏
6. **–í—ã–¥–∞–≤–∞—Ç—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏** –º–æ–∂–Ω–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `grant`:
```sql
grant {–ø—Ä–∏–≤–µ–ª–µ–≥–∏–∏} on {–æ–±—ä–µ–∫—Ç} to {—Ä–æ–ª—å};
-- –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π select, update, insert –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª—Ü–∏ –≤ —Å—Ö–µ–º–µ HR_POC –¥–ª—è —Ä–æ–ª–∏ user1
grant select, update, insert on all tables in schema HR_POC to user1;
```
7. PostgreSQL –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞(–ø–ª–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞). –°–æ—Å—Ç–æ–∏—Ç –∏–∑ —É–∑–ª–æ–≤: —Å—Ç–æ–∏–º–æ—Å—Ç—å(—É.–µ–¥.), —Å—Ç—Ä–æ–∫–∏, –≤—Ä–µ–º—è(–º—Å). –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —É–∑–ª–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—á–µ—Ä–Ω–∏—Ö.
## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `select` –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –≤—ã–±–æ—Ä–∞
1. –ì—Ä—É–ø–ø—ã sql –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤:
	1. –ú–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è: `select, insert, update, merge, delete`
	2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: `create, alter, drop`
	3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è: `grant, revoke`
2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ **`select`**
```sql
select [all|distinct] {—Å—Ç–æ–ª–±—Ü—ã, –≤—ã—Ä–∞–∂–µ–Ω–∏—è}
[from {—Ç–∞–±–ª–∏—Ü—ã}]
[where {—É—Å–ª–æ–≤–∏—è –≤—ã–±–æ—Ä–∞}]
[group by {—Å—Ç–æ–ª–±—Ü—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏}]
[having {—É—Å–ª–æ–≤–∏—è –Ω–∞ –≥—Ä—É–ø–ø—É}]
[order by {—Å—Ç–æ–ª–±—Ü—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ [asc‚Üë|desc‚Üì]}]
[limit {n}|offset {n}];
```
3. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ `select`:
	1. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–ø–∏—Å–∏ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏. –ï—Å–ª–∏ –Ω–∞–¥–æ —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ–º `distinct`
	2. –ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –≤ `from`, —Ç–æ –¥–ª—è –Ω–∏—Ö –±—É–¥–µ—Ç [[#^cartesian-product|–ø—Ä–∏–º–µ–Ω–µ–Ω–æ –¥–µ–∫–∞—Ä—Ç–æ–≤–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ]]
	3. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `group by` –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `having`, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å —É—Å–ª–æ–≤–∏—è –Ω–∞ –≥—Ä—É–ø–ø—ã. <span class="example-text">–ü—Ä: –ø–æ–ª—É—á–∞–µ–º —Å—É–º–º—É –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Ö–æ—Ç–∏–º –≤—ã–≤–µ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ —Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö —Å—É–º–º–∞ –±–æ–ª—å—à–µ 1000</span>
	4. –ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ –≤ `order by` –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤ —Å–æ—Ä—Ç–∏—Ä—É–µ–º —Å–Ω–∞—á–∞–ª–∞ –ø–æ 1-–º—É, –¥–∞–ª–µ–µ —Ç–µ —Å—Ç–æ–ª–±—Ü—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 1-–≥–æ —Å—Ç–æ–ª–±—Ü–∞ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∑–Ω–∞—á–µ–Ω–∏—è–º 2-–≥–æ —Å—Ç–æ–ª–±—Ü–∞
4. –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `where` –º–æ–∂–µ—Ç –±—ã—Ç—å `true, false, unknown`, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `true`
5. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ `where`: `not ‚Üí and ‚Üí or`
6. –í—ã—Ä–∞–∂–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞:
	1. `like` ‚Äì —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —à–∞–±–ª–æ–Ω—É `—Å—Ç—Ä–æ–∫–∏`:
		1. `%` ‚Äì –ª—é–±–∞—è(–≤ —Ç.—á. –ø—É—Å—Ç–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–º–≤–æ–ª–æ–≤)
		2. `_` ‚Äì –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª
		3. –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å `'_L%' ‚Äì —É —Å—Ç—Ä–æ–∫–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–∞–∫–æ–π-—Ç–æ –ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª, –≤—Ç–æ—Ä–æ–π —Å–∏–º–≤–æ–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ 'L', –¥–∞–ª–µ–µ ‚Äì –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã`
		4. –î–ª—è –ø–æ–∏—Å–∫–∞ —Å–∞–º–∏—Ö –ø–æ —Å–µ–±–µ —Å–∏–º–≤–æ–ª–æ–≤ `%, _` –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: `where addres like '%/_%' escape '/'`, –≥–¥–µ —Å–∏–º–≤–æ–ª —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è `/` –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º
	2. `between` ‚Äì —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ `—Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, –¥–∞—Ç—ã`:
		1. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å `not`, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–∞–∫–æ–≥–æ-—Ç–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
		2. **–ï—Å–ª–∏ —Ö–æ—Ç–∏–º –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–æ–∫–∞–º** `where first_name beetween 'A' and 'B'`, —Ç–æ –Ω–µ –ø–æ–ª—É—á–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Å–∏–º–≤–æ–ª–æ–º `'B'`, —Ç.–∫. —Å—Ç—Ä–æ–∫–∏ –ø–æ —Ç–∏–ø—É `'Bob'` > `'B'`, —Ç.–µ. **–Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Å–ª–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ —Å–∏–º–≤–æ–ª, –≤–º–µ—Å—Ç–æ `'B' ‚Üí 'C'`**
	3. `in(...)` ‚Äì –≤—ã–±—Ä–∞—Ç—å –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞:
		1. –ù–µ–ª—å–∑—è —É–∫–∞–∑—ã–≤–∞—Ç—å `null` –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
	4. `is null` ‚Äì –∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ
7. –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è `'A' || 'B' ‚Üí 'AB'` –∏–ª–∏ `concat('A','B') ‚Üí 'AB'`
8. –£—Å–ª–æ–≤–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:
```sql
-- —É –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ —Å–≤–æ–π —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–º–∏–∏
-- –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
select id,
	case department_id
		when 1 then 1000 + salary
		when 2 then 500 + salary
		when 3 then 700 + salary
		else 100 + salary
		-- else ‚Äì –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –µ—Å–ª–∏ –Ω–µ—Ç—É ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`
	end as bonus
from employees;

-- –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —É—Å–ª–æ–≤–∏–µ
select id,
	case
		when salary > 10000 then 1000 + salary
		when salary > 12000 then 500 + salary
		when salary > 7000 then 700 + salary
		else 100 + salary
	end as bonus
from employees;

-- –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ `case`
select id,
	case department_id
		when 1 then case job_id
			case 'develop' then 1000 + salary
			case 'qa' then 1200 + salary
		when 2 then case job_id
			case 'manager' then 2000 + salary
			case 'analytic' then 1100 + salary
	end as bonus
from employees;
```
## 3. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. –ö–∞–∂–¥—ã–π —Å—Ç–æ–ª–±–µ—Ü —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–π —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞. **–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
2. –í pg –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã, –∞ —Ç–∞–∫ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ.
### 3.1. –ß–∏—Å–ª–æ–≤—ã–µ —Ç–∏–ø—ã
1. –¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ ‚Äì  —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω.
	1. **`smallint`** ‚Äì 16 –±–∏—Ç(int16), –æ—Ç -32_768 –¥–æ +32_767
	2. **`integer`** ‚Äì 32 –±–∏—Ç–∞(int32), –æ—Ç -2_147_483_648 –¥–æ +2_147_483_647
	3. **`bigint`** ‚Äì 64 –±–∏—Ç–∞, –æ—Ç -9_223_372_036_854_775_808 –¥–æ 9_223_372_036_854_775_807
2. –í–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ *—Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—á–∫–æ–π* ‚Äì –æ–±–ª–∞–¥–∞—é—Ç –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é, –Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∏–º–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ.  *n ‚Äì —á–∏—Å–ª–æ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–æ–≤ —Å–ª–µ–≤–∞ –æ—Ç –∑–∞–ø—è—Ç–æ–π, m ‚Äì —á–∏—Å–ª–æ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–æ–≤ —Å–ø—Ä–∞–≤–∞ –æ—Ç –∑–∞–ø—è—Ç–æ–π: 1258,432 ‚Äì n = 4, m = 3*
	1. **`numeric(n, m)/decimal(n, m)`** ‚Äì –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä, n_max = 131072, m_max = 16383
3. –í–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ *—Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π* ‚Äì –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä –¥–æ –∏ –ø–æ—Å–ª–µ —Å–µ–±—è. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —á–∏—Å–ª–∞ –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏, —Å–æ—Ö—Ä–∞–Ω—è—è –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–∞–Ω—Ç–∏—Å—Å–æ–π –∏ –ø–æ—Ä—è–¥–∫–æ–º.
   ![[–ß–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π.png|300]]
   *–ò–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º —á–∏—Å–µ–ª –≤ –¥–≤–æ–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —Å—á–∏—Å–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–π —á–∏—Å–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ, –ø–æ—ç—Ç–æ–º—É –¥–∞–∂–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–µ–Ω—å–≥–∞–º–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å numeric.*
	1. **`real`** ‚Äì 32 –±–∏—Ç–∞, –æ—Ç 1E-37 –¥–æ 1–ï+37 —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é *–¥–æ 6 –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–æ–≤*
	2. **`double precision`** ‚Äì 64 –±–∏—Ç–∞, –æ—Ç 1–ï-307 –¥–æ 1–ï+308 —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é *–¥–æ 15 –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–æ–≤*
4. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ ‚Äì –æ—Å–æ–±—ã–π —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ç–∏–ø, –ø—Ä–∏—Å–≤–∞–∏–≤–∞—é—â–∏–π—Å—è —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–º –∫–ª—é—á–∞–º —Ç–∞–±–ª–∏—Ü—ã
	1. **`smallserial`** ‚Äì 16 –±–∏—Ç, –æ—Ç 1 –¥–æ 32_767
	2. **`serial`** ‚Äì 32 –±–∏—Ç–∞, –æ—Ç 1 –¥–æ 2_147_483_647
	3. **`bigserail`** ‚Äì 64 –±–∏—Ç–∞, –æ—Ç 1 –¥–æ 9_223_372_036_854_775_807
5. **`to_number(x, m)`** ‚Äì x ‚Äì —Å–∏–º–≤–æ–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞,  m ‚Äì –º–∞—Å–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
   `to_number('1220.59', '9999.99') => 1220.59`
	1. 9 ‚Äì —á–∏—Å–ª–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 9 –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —à–∏—Ä–∏–Ω—É –≤—ã–≤–æ–¥–∞
	2. 0 ‚Äì –≤—ã–≤–æ–¥ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –Ω—É–ª–µ–π –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω—ã
	3. .(D) ‚Äì –¥–µ—Å—è—Ç–∏—á–Ω–∞—è —Ç–æ—á–∫–∞(–∑–∞–ø—è—Ç–∞—è)
	4. L ‚Äì —Å–∏–º–≤–æ–ª –≤–∞–ª—é—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç locale
6. –ï—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —á–∏—Å–ª–∞–º–∏, –ø–æ —Ç–∏–ø—É: `round(x, n)`, `random()`, `generate_series(start, stop[, step])`. [üìñ](https://www.postgresql.org/docs/current/functions-math.html)
### 3.2. –°–∏–º–≤–æ–ª—å–Ω—ã–µ —Ç–∏–ø—ã
1. –°—Ç—Ä–æ–∫–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã(**character(n)** | **char(n)**) ‚Äì –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª–∏–Ω–æ–π n. *–ï—Å–ª–∏ –¥–ª–∏–Ω–∞ –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ n ‚Äì –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è –ø—Ä–æ–±–µ–ª–∞–º–∏(—ç—Ç–∏ –ø—Ä–æ–±–µ–ª—ã –Ω–µ–≤–∞–∂–Ω—ã –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏).*
2. –°—Ç—Ä–æ–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã(**character varying(n)** | **varchar(n)**) ‚Äì –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤ —Å **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π** –¥–∏–Ω–æ–π n. *–ï—Å–ª–∏ –¥–ª–∏–Ω–∞ –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ n ‚Äì –∑–∞–ø–æ–ª–Ω—è—Ç—Å—è –ø—Ä–æ–±–µ–ª–∞–º–∏ –Ω–µ –±—É–¥–µ—Ç.*
3. –ï—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏, –ø–æ —Ç–∏–ø—É: `upper(str)`, `concat(str1, str2, str3, ...)`, `replace(str, search_str[, replace_str])`. [üìñ](https://www.postgresql.org/docs/9.1/functions-string.html)
4. –§—É–Ω–∫—Ü–∏—è `to_char()`:
	1. —á–∏—Å–ª–æ –≤ —Å—Ç—Ä–æ–∫—É ‚Äì `to_char(x, m)`, –≥–¥–µ x ‚Äì —á–∏—Å–ª–æ, m ‚Äì –º–∞—Å–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: **`to_char(1220.59, '9999.99') => '1220.59'`**
	   **`to_char(1220.59, '999.99') => '###.##'`**
		1. 9 ‚Äì —á–∏—Å–ª–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ 9 –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —à–∏—Ä–∏–Ω—É –≤—ã–≤–æ–¥–∞
		2. 0 ‚Äì –≤—ã–≤–æ–¥ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –Ω—É–ª–µ–π –¥–æ –∑–∞–¥–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω—ã
		3. .(D ) ‚Äì –¥–µ—Å—è—Ç–∏—á–Ω–∞—è —Ç–æ—á–∫–∞(–∑–∞–ø—è—Ç–∞—è)
		4. L ‚Äì —Å–∏–º–≤–æ–ª –≤–∞–ª—é—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç locale
	1. –¥–∞—Ç–∞ –≤ —Å—Ç—Ä–æ–∫—É ‚Äì `to_char(x, m)`: **`to_char(now(), 'DD-MM-YYYY HH24-MI-SS') => '20-07-2024 12-52-23'`**. [üìñ](https://www.postgresql.org/docs/current/functions-formatting.html)
5. –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏: –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞.(`||` ‚Äì –∫–æ–Ω–∫–∞—Ç–µ–Ω–Ω–∞—Ü–∏—è)
```sql
select rpad(first_pad || ' ' || last_name, 20) || ' has a mounth salary of ' || lpad(to_char(salary, '99999D99'), 9) || ' dollars.' as pay
from employees
where salary > 12000;

-- –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –Ω–∞—à–∏ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —É–¥–æ–±–æ—á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ lpad, rpad
pay
--------------------
Steven King         has a mounth salary of 24000,00 dollars.
Phillip Russell     has a mounth salary of 13500,00 dollars.
...
```
### 3.3. –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
1. **`date`** ‚Äì 32 –±–∏—Ç–∞, –¥–∞—Ç–∞ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏, –æ—Ç 4_713 –¥–æ –Ω.—ç. –¥–æ 5_874_897 –Ω.—ç.
2. **`time[(p)]`** ‚Äì 64 –±–∏—Ç–∞, –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å p –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –æ—Ç 00.00.00.000000 –¥–æ 24.00.00.000000
3. **`time[(p)] with time zone`** ‚Äì 64 –±–∏—Ç–∞, –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ **—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞** –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –¥–∞—Ç—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å p –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –æ—Ç 00.00.00.000000+1559 –¥–æ 24.00.00.000000-1559
4. **`timestamp[(p)]`** ‚Äì 64 –±–∏—Ç–∞, –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ **–±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞** —Å —Ç–æ—á–Ω–æ—Å—Ç—å p –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –æ—Ç 4_713 –¥–æ –Ω.—ç. –¥–æ 294_276 –Ω.—ç.
5. **`timestamp[(p)] with time zone`** ‚Äì 64 –±–∏—Ç–∞, –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ **c —É–∫–∞–∑–∞–Ω–∏–µ–º —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞** —Å —Ç–æ—á–Ω–æ—Å—Ç—å p –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –æ—Ç 4_713 –¥–æ –Ω.—ç. –¥–æ 294_276 –Ω.—ç.
6. **`tstzrange`** ‚Äì 128 –±–∏—Ç, –¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç —Å –ø–æ–¥—Ç–∏–ø–æ–º **`timestamp[(p)] with time zone`**
7. **`interval [fields] [(p)]`** ‚Äì 128 –±–∏—Ç, –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
```sql
select interval '10 day 4 month 2 year' as new_interval;
```
9. **`to_date(x, m)`**, **`to_timestamp(x, m)`** ‚Äì `to_date('01-SEP-2018', 'DD-MON-YYYY') => 01-09-2018` [üìñ](https://www.postgresql.org/docs/current/functions-formatting.html)
10. –î–ª—è –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏ –µ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ —Ç–∏–ø—É: `age(z, y)`,  `current_date`.[üìñ](https://www.postgresql.org/docs/current/functions-datetime.html)
	1. **`now()`**/**`current_timestamp`** ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞: `20-07-2024 23:02:04.695 +0300`
### 3.4 –õ–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø

1. –ó–Ω–∞—á–µ–Ω–∏—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ç–∏–ø–∞ –º–æ–≥—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å `true`, `false` –∏ `unknown(null)`.
2. `true AND null => true`, `false AND null => false`
### 3.5. NULL
1. **`coalesce(x1, x2, x3, ...)`** ‚Äì –±–µ—Ä–µ—Ç –ø–µ—Ä–≤–æ–µ **–ù–ï** `null` –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö:
   `coalesce(null, null, 1, 'Hello') => 1`
## 4. –ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. –ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≥—Ä—É–ø–ø—É —Å—Ç—Ä–æ–∫, –∞ –Ω–µ –æ–¥–Ω—É. –ì—Ä—É–ø–ø–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –≤—Å—è —Ç–∞–±–ª–∏—Ü–∞, —Ç–∞–∫ –∏ –µ–µ —á–∞—Å—Ç—å.
	1. **`sum(expr)`** ‚Äì —Å—É–º–º–∞ –∑–Ω–∞—á–µ–Ω–∏–π expr, –∏–≥–Ω–æ—Ä–∏—Ä—É—è `null`
	2. **`count(expr|*)`** ‚Äì —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∑–Ω–∞—á–µ–Ω–∏—è `null`, –µ—Å–ª–∏ `*` ‚Äì —Å—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ —Ü–µ–ª–æ–º
```sql
select count(*) as "count(*)", count(e.salary) as "count(e.salary)", count(distinct e.salary) as "count(distinct e.salary)" from employees;

-- count(*) | count(e.salary) | count(distinct e.salary)
-- ---------|-----------------|-------------------------
--       107|              105|                       56

1. count(*) ‚Äì —Å—á–∏—Ç–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
2. count(e.salary) ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ù–ï null –∑–Ω–∞—á–µ–Ω–∏–π —Å—Ç–æ–ª–±—Ü–∞ salary
3. count(distinct e.salary) ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ù–ï null –∑–Ω–∞—á–µ–Ω–∏–π —Å—Ç–æ–ª–±—Ü–æ–≤ salary
```
2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—è—Ö –≤ –≥—Ä—É–ø–ø—ã.
   *–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Ä–æ–ª—è–º–∏.*
```sql
select {—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤*}, {–∞–≥—Ä–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏}
from {—Ç–∞–±–ª–∏—Ü–∞}
where {—É—Å–ª–æ–≤–∏—è}
group by {—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤*} -- ‚ùó–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–µ –∂–µ —Å—Ç–æ–ª–±—Ü—ã, —á—Ç–æ –∏ –≤ select‚ùó
having {—É—Å–ª–æ–≤–∏—è –¥–ª—è –≥—Ä—É–ø–ø};
```
3. –í `group by` –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤(–∏ –¥–∞–∂–µ –±–æ–ª—å—à–µ, —á–µ–º –≤ `select`). –í –∏—Ç–æ–≥–µ –±—É–¥–µ–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –Ω–µ –ø–æ –æ–¥–Ω–æ–º—É –ø–æ–ª—é, –∞ –ø–æ –≤—Å–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ `group by`. 
   *–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Ä–æ–ª—è–º–∏ –∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–æ–º–µ—Ä–æ–º –æ—Ç–¥–µ–ª–∞.*
4.  `having` ‚Äì –∫–∞–∫ `where`, –Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏.
```sql
select department_id as d_id, sum(salary) as salaries_sum
from employees
group by d_id
having sum(salary) > 5000 -- –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—â—É—é —Å—É–º–º—É –∑–∞—Ä–ø–ª–∞—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –∑–∞–ø–∏—Å–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö —ç—Ç–∞ —Å—É–º–º–∞ –±–æ–ª—å—à–µ 5000
order by salaries_sum; -- ‚ùó–ø—Å–µ–≤–¥–æ–Ω–∏–º—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û –≤ group by –∏ order by‚ùó
```
5. –ó–∞–ø—Ä–æ—Å—ã —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –∏ —É—Å–ª–æ–≤–∏—è–º–∏ –Ω–∞ –≥—Ä—É–ø–ø—É –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `where`, –Ω–æ —Å–Ω–∞—á–∞–ª–∞ –±—É–¥—É—Ç –≤—ã–±–∏—Ä–∞—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å `where`, –ø–æ—Ç–æ–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –û–°–¢–ê–í–®–ò–•–°–Ø —Å—Ç—Ä–æ–∫ –∏ —É–∂–µ –ø–æ—Ç–æ–º –≤—ã–±–æ—Ä –ø–æ —É—Å–ª–æ–≤–∏—é `having`.
### –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
1. –ï—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏, —Ä–∞—Å—à–∏—Ä—è—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª.
2. –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è **`rollup`**, **`cube`**, **`grouping sets`**, **`grouping(column)`** –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –±—É–¥–µ—Ç —É–¥–æ–±–Ω–µ–µ –ø–æ—á–∏—Ç–∞—Ç—å –º–æ–µ [–æ–±—Å—É–∂–¥–µ–Ω–∏–µ —Å gpt4o](https://gptunnel.ru/s/zXuzLg).
## 5. –ú–Ω–æ–≥–æ—Ç–∞–±–ª–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
1. –í —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–∑–∞—Ö —Ç–∞–±–ª–∏—Ü—ã –º–æ–≥—É—Ç —Å–≤—è–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π –∏ –≤ —Ü–µ–ª–æ–º —Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –ø–æ —Ä–∞–∑–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º.
2. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å —É—Å–ª–æ–≤–∏—è –¥–ª—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –¥–µ–∫–∞—Ä—Ç–æ–≤–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ: –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–æ–π –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü—ã:
```sql
| id  | name  |
| --- | ----- |
| 1   | Alice |
| 2   | Bob   |

| id  | value |
| --- | ----- |
| 1   | 10    |
| 2   | 20    |
| 3   | 30    |

| id (table1) | name  | id (table2) | value |
| ----------- | ----- | ----------- | ----- |
| 1           | Alice | 1           | 10    |
| 1           | Alice | 2           | 20    |
| 1           | Alice | 3           | 30    |
| 2           | Bob   | 1           | 10    |
| 2           | Bob   | 2           | 20    |
| 2           | Bob   | 3           | 30    |
```
3. –ú–æ–∂–Ω–æ —Å–æ–µ–¥–∏–Ω—è—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ `where`:
```sql
select {—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤}
from –¢–∞–±–ª–∏—Ü–∞1, –¢–∞–±–ª–∏—Ü–∞2, –¢–∞–±–ª–∏—Ü–∞3
where –¢–∞–±–ª–∏—Ü–∞1 <—É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è> –¢–∞–±–ª–∏—Ü–∞2
[and –¢–∞–±–ª–∏—Ü–∞2 <—É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è> –¢–∞–±–ª–∏—Ü–∞3 ...]
```
4. –ù–æ –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ `join`:
```sql
select {—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤}
from –¢–∞–±–ª–∏—Ü–∞1
join –¢–∞–±–ª–∏—Ü–∞2 <—É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è> -- *
[join –¢–∞–±–ª–∏—Ü–∞3 <—É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è> ...] -- **
```
   .     **–õ–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞** ‚Äì —Ç–∞–±–ª–∏—Ü–∞ —Å–ª–µ–≤–∞ –æ—Ç `join`(—Ç.–µ. –¢–∞–±–ª–∏—Ü–∞1*,  –¢–∞–±–ª–∏—Ü–∞2**)
    **–ü—Ä–∞–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞** ‚Äì —Ç–∞–±–ª–∏—Ü–∞ —Å–ø—Ä–∞–≤–∞ –æ—Ç `join` (—Ç.–µ. –¢–∞–±–ª–∏—Ü–∞2*, –¢–∞–±–ª–∏—Ü–∞3**).
5. –£—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏:
`using` ‚Äì –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ –∏–º–µ–Ω–∏ —Å—Ç–æ–ª–±—Ü–∞ –≤ –æ–±–æ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
```sql
select t1.name, t2.rating
from users t1
join ratings t2 using user_id; -- ‚ùó—Å—Ç–æ–ª–±–µ—Ü user_id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –æ–±–æ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö‚ùó
```
`on` ‚Äì –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º —É—Å–ª–æ–≤–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è(–±–æ–ª–µ–µ –≥–∏–±–∫–æ–µ)
```sql
select t1.name, t2.rating
from users t1
join ratings t2 on t1.user_id = t2.user_id; -- —Ç—É—Ç —É–∂–µ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ª–æ–≤–∏–µ

select t1.name, t2.salary
from users t1
join roles t2 on t1.role_name in t2.role_names; -- –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —É—Å–ª–æ–≤–∏–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞
```
6. –°–∞–º–æ—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ ‚Äì –∫–æ–≥–¥–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å–∞–º–∞ —Å —Å–æ–±–æ–π
### 5.1 –í–∏–¥—ã `join`
*–¢–∞–±–ª–∏—Ü—ã –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤:*
```sql
**employees**
| employee_id | name   | department_id |
|-------------|--------|---------------|
| 1           | Alice  | 1             |
| 2           | Bob    | 2             |
| 3           | Charlie| 1             |
| 4           | David  | NULL          |

**departments**
| department_id | department_name |
|---------------|------------------|
| 1             | HR               |
| 2             | IT               |
| 3             | Marketing        |
```

1. `natural join` ‚Äì –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –≤—Å–µ—Ö –æ–¥–Ω–æ–∏–º–µ–Ω–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ —Ç–∞–±–ª–∏—Ü—ã(—Ç.–µ. —É —Ç–∞–±–ª–∏—Ü –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –æ–¥–Ω–æ–∏–º–µ–Ω–Ω–æ–µ –ø–æ–ª–µ)
   *p.s. –Ω–µ–ª—å–∑—è —É–∫–∞–∑–∞—Ç—å —É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è*
```sql
| name    | department_name |
|---------|------------------|
| Alice   | HR               |
| Bob     | IT               |
| Charlie | HR               |
```
1. `[inner] join` ‚Äì –≤—ã–≤–æ–¥–∏–º —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏ –≤ –ª–µ–≤–æ–π, –∏ –≤ –ø—Ä–∞–≤–æ–π —Ç–∞–±–ª–∏—Ü–∞—Ö
   ![[inner join.png]]
```sql
| name    | department_name |
|---------|------------------|
| Alice   | HR               |
| Bob     | IT               |
| Charlie | HR               |
```
2. `left [outer] join` ‚Äì –≤—ã–≤–æ–¥–∏–º –í–°–ï –°–¢–†–û–ö–ò –õ–ï–í–û–ô —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏(–µ—Å–ª–∏ –µ—Å—Ç—å) –ø—Ä–∞–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
   ![[left join.png]]
```sql
| name    | department_name |
|---------|------------------|
| Alice   | HR               |
| Bob     | IT               |
| Charlie | HR               |
| David   | NULL             |
```
3. `right [outer] join` ‚Äì –≤—ã–≤–æ–¥–∏–º –í–°–ï –°–¢–†–û–ö–ò –ü–†–ê–í–û–ô —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏(–µ—Å–ª–∏ –µ—Å—Ç—å) –ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
   ![[right join.png]]
```sql
| name    | department_name |
|---------|------------------|
| Alice   | HR               |
| Bob     | IT               |
| Charlie | HR               |
| NULL    | Marketing        |
```
4. `full [outer] join` ‚Äì –≤—ã–≤–æ–¥–∏–º –í–°–ï –°–¢–†–û–ö–ò –û–ë–û–ò–• –¢–ê–ë–õ–ò–¶, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –ª–µ–≤–æ–π –∏–ª–∏ –ø—Ä–∞–≤–æ–π –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç
   ![[full join.png]]
```sql
| name    | department_name |
|---------|------------------|
| Alice   | HR               |
| Bob     | IT               |
| Charlie | HR               |
| David   | NULL             |
| NULL    | Marketing        |
```
5. `cross join` ‚Äì –¥–µ–∫–∞—Ä—Ç–æ–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —Ç.–µ. –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —Å–æ –≤—Å–µ–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –ø—Ä–∞–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
```sql
| name    | department_name |
|---------|------------------|
| Alice   | HR               |
| Alice   | IT               |
| Alice   | Marketing        |
| Bob     | HR               |
| Bob     | IT               |
| Bob     | Marketing        |
| Charlie | HR               |
| Charlie | IT               |
| Charlie | Marketing        |
| David   | HR               |
| David   | IT               |
| David   | Marketing        |
```   
## 6. –ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã
1. –ü–æ–¥–∑–∞–ø—Ä–æ—Å ‚Äì –µ—â–µ –æ–¥–∏–Ω `select` –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ. –ß–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `where`, `having`, `from`.
2. **–ü—Ä–æ—Å—Ç—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑**, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º. –ú–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: `=`, `<`, `>`, `in`, `any`, `all`.
   **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–ú –î–ê–ù–ù–´–ï –ò–ó –û–°–ù–û–í–ù–û–ì–û –ó–ê–ü–†–û–°–ê –í –ü–û–î–ó–ê–ü–†–û–°–ï**
```sql
-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ WHERE
select *
from employees
where dep_id = 3
and salary > (select avg(salary) from employees where dep_id = 3);

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ HAVING
select *
from employees
group by dep_id
having avg(salary) > (select avg(salary) from employees);
‚ùó–µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç NULL –∏–ª–∏ –±—É–¥–µ—Ç –ø—É—Å—Ç, —Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Ç.–µ. NULL –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç NULL‚ùó

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å IN
select *
from Departments
where location_id not in (select location_id 
						  from locations 
						  where country_id = 'US');

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å ALL
-- ALL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è(=, <, >)
-- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç TRUE, –µ—Å–ª–∏ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç —É—Å–ª–æ–≤–∏—é
select *
from employees
where salary > all (select salary -- –≤–µ—Ä–Ω–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –∑/–ø
					from employees -- –±–æ–ª—å—à–µ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ 50
					where dep_id = 50);
‚ùó–µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç NULL, —Ç–æ ALL –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å FALSE‚ùó
‚ùó–µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π, —Ç–æ ALL –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å TRUE‚ùó

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å ANY
select *
from employees
where salary > any (select salary -- –≤–µ—Ä–Ω–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –∑/–ø
					from employees -- –±–æ–ª—å—à–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
					where dep_id = 50); -- –∏–∑ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ 50
‚ùó–µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω–µ—Ç NULL, —Ç–æ ANY –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å TRUE, —Ç.–µ. –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ –≤–ª–∏—è—é—Ç NULL‚ùó
‚ùó–µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π, —Ç–æ ANY –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å FALSE‚ùó
```
3. –ú–Ω–æ–≥–æ—Å—Ç–æ–ª–±—Ü–æ–≤—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã ‚Äì –∫–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ–º –Ω–µ –æ–¥–∏–Ω, –∞ —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–µ.
   **–ö–û–õ–ò–ß–ï–°–¢–í–û –°–†–ê–í–ù–ò–í–ê–ï–ú–´–• –°–¢–û–õ–ë–¶–û–í –ò –ò–• –¢–ò–ü–´ –î–û–õ–ñ–ù–´ –°–û–û–í–ï–¢–°–¢–í–û–í–ê–¢–¨ –¢–ï–ú, –ß–¢–û –í–´–ë–ò–†–ê–ï–ú –í –ü–û–î–ó–ê–ü–†–û–°–ï**
```sql
...
where ({—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤}) [= | in | any | all]
(select {—Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π} from ...);

select *
from employees
where (job_id, salary) in (select distinct job_id, salary
						   from employees
						   where employee_id = 106);
```
4. –ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç –ø–æ–º–æ—á—å —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤:
```sql
-- –°–Ω–∞—á–∞–ª–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –¥—Ä—É–≥ –º–µ–∂–¥—É –¥—Ä—É–≥–æ–º
-- –ø–æ—Ç–æ–º –≥—Ä—É–ø–ø–∏—Ä—É–µ–º –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º
select d,dep_id, d.name, d.manager_id, count(*)
from department d
join employees e on d.dep_id = e.dep_id
group by dep_id, d.name, d.manager_id
having count(*) > 10;

-- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ–º –º—ã –ø—Ä–æ—Ñ–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –Ω—É–∂–Ω—ã
-- –ø–æ—Ç–æ–º —É–∂–µ –≥—Ä—É–ø–ø–∏—Ä—É–µ–º
-- –í –ò–¢–û–ì–ï –û–ë–™–ï–î–ò–ù–Ø–ï–ú –ú–ï–ù–¨–®–ï–ï –ö–û–õ–ò–ß–ï–°–¢–í–û –ó–ê–ü–°–ò–ï–ô, –ß–¢–û –£–õ–£–ß–®–ê–ï–¢ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨
select d,dep_id, d.name, d.manager_id, count(*)
from department d
join (select employees
	  group by dep_id
	  having count(*) > 10
	  ) e on d.dep_id = e.dep_id;
```
5. **–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã** ‚Äì ***–∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–ª–±—Ü–æ–≤ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞*** –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏.
```sql
select first_name, last_name, dep_id, salary
from employees e
where e.salary > (select avg(e1.salary)
				 from employees e1
				 where e1.dep_id = e.dep_id); -- –∏—Å–ø–æ–ª—å–∑—É–µ–º e.dep_id –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
```
6. **`exists`** ‚Äì —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç `true` –µ—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å —á—Ç–æ-—Ç–æ –Ω–∞—à–µ–ª:
```sql
select *
from employees e
where e.dep_id = 80
and exists (select emp_id
			from employees e1
			where e.emp_id = e1.emp_id);
```
7. **`with`** ‚Äì –≤—ã–Ω–æ—Å–∏–º –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –∏–º –∏–º–µ–Ω–∞, –¥–∞–ª–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–∏ —Ç–∞–±–ª–∏—Ü—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ:
   *—É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞*
```sql
with avg_salaries (select e1.dep_id, avg(e1.salary) as avg_salary
				 from employees e1
				 group_by e1.dep_id),
select first_name, last_name, dep_id, salary
from employees e
join avg_salaries asl on e.dep_id = asl.dep_id
where e.salary > asl.avg_salary;
```
8. **–°–æ—Å—Ç–∞–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** ‚Äì –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –∏ –±–æ–ª–µ–µ select –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ–¥–∏–Ω:
	1. **`union [all]`** ‚Äì –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–≤—É—Ö `select`, –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å—Ç—Ä–æ–∫–∏
	2. **`intersect [all]`** ‚Äì –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –¥–≤—É—Ö `select` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–±–æ–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
	3. **`except [all]`** ‚Äì –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–µ–≤–æ–≥–æ `select` —É–¥–∞–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–æ–≥–æ `select`
   `all` *–ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏*
9. –£—Å–ª–æ–≤–∏—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
	1. –ó–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ–ª–±—Ü–æ–≤
	2. –¢–∏–ø—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ
	3. –ò–º–µ–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
```sql
select A
[union | intersect | except]
select B
[union | intersect | except]
select C...

select customer_id
from orders
where manager_id = 149
intersect
select customer_id
from orders
where manager_id = 150;
```
10. –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞—Ö:
```sql
select customer_id, c_name
from customer
where customer_id in (select customer_id
					  from orders
					  where manager_id = 149
					  intersect
					  select customer_id
					  from orders
					  where manager_id = 150);
```

## 7. –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
```sql
insert ‚Äì –≤—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫
update ‚Äì –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤
merge ‚Äì —Å–ª–∏—è–Ω–∏–µ —Å—Ç—Ä–æ–∫
delete ‚Äì —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
```
2. –û–ø–µ—Ä–∞—Ç–æ—Ä—ã ‚Üë –Ω–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç –≤—ã–≤–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫. **–î–ª—è –≤—ã–≤–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** `returning *|[—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤]`
###  7.1 **`insert`**

1. **`insert`** ‚Äì –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –æ–¥–Ω–æ–π –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü—É
```sql
insert {–∏–º—è_—Ç–∞–±–ª–∏—Ü—ã} [—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤] -- —É–∫–∞–∑—ã–≤–∞–µ–º, –µ—Å–ª–∏ —Å—Ç–æ–ª–±—Ü—ã —Ç–∞–±–ª–∏—Ü—ã
values (—Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π)               -- –∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç
[returning *];

insert into products (pruduct_id, product_name, price)
values (89. 'Pr Name', 1800);

insert into products -- (pruduct_id, product_name, price, rating) —Å—Ç–æ–ª–±—Ü—ã —Ç—É—Ç
values (89. 'Pr Name', 1800, 4.7)                              -- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã


‚ùó–í—Å—Ç–∞—Ç–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ò–õ–ò null, –µ—Å–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ‚ùó
-- default ‚Äì —Å–ª—É–∂–µ–±–Ω–æ–µ —Å–ª–æ–≤–æ
insert into products (pruduct_id, product_name, rating, price)
values (89. 'Pr Name', default, 1800);

-- default –º–æ–∂–Ω–æ –∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å
insert into products (pruduct_id, product_name, price) -- rating –∏ —Ç–∞–∫ –ø–æ–ª—É—á–∏—Ç
values (89. 'Pr Name', 1800);                          -- –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é
```
2. –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫, —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `select`
```sql
insert {–∏–º—è_—Ç–∞–±–ª–∏—Ü—ã} [—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤]
select [—Å–ø–∏—Å–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤] —Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞;

insert into products_copy
select pr.product_id, pr.product_name, pr.price, pr.rating, sum(pr.price) from products pr;
```
3. –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∏ —Å—Ä–∞–∑—É –µ–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å
```sql
create table {–∏–º—è_—Ç–∞–±–ª–∏—Ü—ã} as
select ...

create table products_not_sales as
select * from products
where product_id not in (select product_id
						 from orders);
```

### 7.2 **`update`**

1. **`update`** ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü—É
```sql
update {–∏–º—è_—Ç–∞–±–ª–∏—Ü—ã}
set {—Å—Ç–æ–ª–±–µ—Ü} = {–∑–Ω–∞—á–µ–Ω–∏–µ|–≤—ã—Ä–∞–∂–µ–Ω–∏–µ|–∑–∞–ø—Ä–æ—Å}
where {—É—Å–ª–æ–≤–∏–µ};

update employees
set salary = 8500
where employe_id = 110;

update employees
set job_id = 'SA_MAN',
	salary = 10500,
	rating_e = 4
where employe_id = 110;

update employees
set salary = (select max(salary)
			  from employees
			  where dep_id = 6)
where employe_id = 110;

update employees
set (salary, job_id, rating_e) = (select salary, job_id, rating_e
								  from employees
								  where employee_id = 120)
where employe_id = 110;

‚ùó–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é‚ùó
update employees
set manager_id = default
where employe_id = 110;
```
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤
```sql
update employees_sales emps
set sales_count = (select count(*)
				   from orders o
				   where o.salesman_id = emps.salesman_id)
where salesman_id in (110, 112);
```

### 7.3 **`merge`**

1. **`merge`** ‚Äì –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–∏–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –∏–∑ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ –¥—Ä—É–≥—É—é
```sql
merge into [only] {—Ç–∞–±–ª–∏—Ü–∞_–ø—Ä–∏–º–Ω–∏–∫}
      using {—Ç–∞–±–ª–∏—Ü–∞ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å_–∏—Å—Ç–æ—á–Ω–∏–∫}
      on {—É—Å–ª–æ–≤–∏–µ_—Å–ª–∏—è–Ω–∏—è}
when matched then delete|update
      set {—Å—Ç–æ–±–ª–µ—Ü_1} = {–∑–Ω–∞—á–µ–Ω–∏–µ_1|–≤—ã—Ä–∞–∂–µ–Ω–∏–µ_1}
      ...
      set {—Å—Ç–æ–±–ª–µ—Ü_n} = {–∑–Ω–∞—á–µ–Ω–∏–µ_n|–≤—ã—Ä–∞–∂–µ–Ω–∏–µ_n}
when not matched then insert
      values({—Å–ø–∏—Å–æ–∫_—Å—Ç–æ–ª–±—Ü–æ–≤});

merge into orders_1 ord1 using orders_2 ord2
on ord1.order_id = ord2.order_id
when matched then
	update set ord1.status = ord2.status
when not matched then
	insert (order_id, customer_id, status, salesman_id, order_date)
	value (ord2.order_id, ord2.customer_id, ord2.status, ord2.salesman_id, ord2.order_date);
```

### 7.4 **`delete`**

1. **`delete`** ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫
```sql
delete from {—Ç–∞–±–ª–∏—Ü–∞}
[where {—É—Å–ª–æ–≤–∏–µ}]; -- –µ—Å–ª–∏ WHERE –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äì –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ —Å—Ç—Ä–æ–∫–∏

delete from products
where product_id = 77;
```
2. –ö–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `delete`
```sql
-- —É–¥–∞–ª—è–µ–º –≤—Å–µ –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–µ–≤—ã—à–µ–Ω –∫—Ä–µ–¥–∏—Ç–Ω—ã–π –ª–∏–º–∏—Ç
delete from orders o
where (
	(select credit_limit
	from customers
	where customer_id = o.customer_id)
	<
	(select sum(quantity * unit_price)
	from orders
	join order_item using (order_id)
	where customer_id = o.customer_id)
);
```

### 7.5 –û—à–∏–±–∫–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å—Å—ã–ª–æ—á–Ω–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

1. –ï—Å–ª–∏ —Ç–∞ —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã —Ö–æ—Ç–∏–º —É–¥–∞–ª–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–¥–µ-—Ç–æ –≤ –≤–∏–¥–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞, —Ç–æ –±–µ–∑ –∑–∞–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π —É–¥–∞–ª–µ–Ω–∏—è –º—ã –Ω–µ —Å–º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å "—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é" –∑–∞–ø–∏—Å—å
   –ò–õ–ò
   –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –≤—Å—Ç–∞–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞ –Ω–∞ –¥—Ä—É–≥—É—é –∑–∞–ø–∏—Å—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ç–æ —Ç–∞–∫ –∂–µ –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É.
2. –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è "—Å–±—Ä–æ—Å–∞" –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:
	1. `on delete cascade` ‚Äì –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–ø–∏—Å–µ–π, –≤—Å–µ —ç—Ç–∏ "–¥–æ—á–µ—Ä–Ω–∏–µ" –∑–∞–ø–∏—Å–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
	2. `on delete set null` ‚Äì –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–ø–∏—Å–µ–π, –≤—Å–µ–º —Å—Ç–æ–ª–±—Ü–∞–º —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏ –±—É–¥–µ—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ `null`

## 8. –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

1. 